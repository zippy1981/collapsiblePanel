(function(a){a.fn.extend({collapsiblePanel:function(d){var e={panelId:null,titleQuery:null,collapsedImage:"panelCollapsed.png",expandedImage:"panelExpanded.png",startCollapsed:false};d=a.extend(e,d);var c=function(h){h.find(">div.collapsiblePanelTitle").unbind("click");h.find(">div.collapsiblePanelContents").slideUp("slow");g(h.find(">div.collapsiblePanelTitle"));h.find(">div.collapsiblePanelTitle").click(function(){b(h)})};var g=function(h){h.find(">img.collapseExpandToggle").attr("src",d.collapsedImage)};var b=function(h){h.find(">div.collapsiblePanelTitle").unbind("click");h.find(">div.collapsiblePanelContents").slideDown("slow");f(h.find(">div.collapsiblePanelTitle"));h.find(">div.collapsiblePanelTitle").click(function(){c(h)})};var f=function(h){h.find(">img.collapseExpandToggle").attr("src",d.expandedImage)};return this.each(function(){var h=a(this).data("inCollapsiblePanel");if(h!=true){a(this).data("inCollapsiblePanel",true);var k=a(this);k.wrap(a('<div class="collapsiblePanelContents"></div>'));k=k.parent();var j=a('<div class="collapsiblePanelTitle"><img class="collapseExpandToggle" src="'+d.expandedImage+'" alt="" height="16" width="16"/></div>');j.append(a(d.titleQuery).addClass("collapseTitleContents"));j.hover(function(){a(this).addClass("collapsiblePanelTitleHover")},function(){a(this).removeClass("collapsiblePanelTitleHover")});var i=a('<div class="collapsiblePanelOuter"></div>');if(d.panelId!=null){i[0].id=d.panelId}i=k.wrap(i).parent();j.insertBefore(k);if(d.startCollapsed){c(i)}else{j.click(function(){c(i)})}}})}})})(jQuery);
